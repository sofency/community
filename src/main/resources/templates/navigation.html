<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>
<nav class="navbar navbar-default" th:fragement="nav">
    <div class="container-fluid">
        <div class="navbar-header">
            <!-- 起到动态变化的作用-->
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <a th:href="@{/}"><span class="sr-only">码匠社区</span></a>
            </button>
            <a class="navbar-brand" th:href="@{/}">码匠社区</a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <form class="navbar-form navbar-left" action="/">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="搜索问题" name="search">
                </div>
                <button type="submit" class="btn btn-default">搜索</button>
            </form>
            <ul class="nav navbar-nav navbar-right">
                <li th:if="${session.user !=null && session.user.accountId != 0 }"> <a href="#">通知<span class="badge"   style="margin-left:10px;" th:text="${session.unreadCount}"></span></a></li>
                <li th:if="${session.user !=null && session.user.accountId != 0 }"><a th:href="@{/publish}">提问</a></li>
                <li th:if="${session.user==null ||session.user.accountId == 0 }"><a href="javascript:void(0)" style="cursor: pointer" data-toggle="modal" data-target="#myModal">登录</a></li>
                <li class="dropdown" th:if="${session.user !=null && session.user.accountId != 0 }">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                        <span th:text="${session.user.accountId}"></span>
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu" th:if="${session.user} ne null">
                        <li><a th:href="@{/profile/questions}">我的问题</a></li>
                        <li><a href="#">个人资料</a></li>
                        <li><a th:href="@{/logout}">退出登录</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <!--提示错误信息-->
            <div class="modal-content">
                <h4 class="title">
                    <div class="col-lg-8 col-lg-offset-2 text-center">
                        <a href="#" class="common-a active regist" onmouseover="showUnderline(this)" onmouseout="hiddenLine(this)" onclick="choose(this)">注册</a>
                        <span class="circle"></span>
                        <a href="#" class="common-a login-btn" onmouseover="showUnderline(this)" onmouseout="hiddenLine(this)" onclick="choose(this)">登录</a>
                    </div>
                </h4>
                <div class="modal-body clearfix">
                    <!---注册的选项-->
                    <table class="self-table register">
                        <tr>
                            <td><span class="glyphicon glyphicon-lock"></span></td>
                            <td><input type="password" name="password" placeholder="请输入密码" id="inputPassword"></td>
                        </tr>
                        <tr>
                            <td><span class="glyphicon glyphicon-lock"></span></td>
                            <td><input type="password" placeholder="请确认密码" id="confirm"><span id="errorPwd"></span></td>
                        </tr>
                        <tr>
                            <td><span class="glyphicon glyphicon-user"></span></td>
                            <td><input type="email" name="email" placeholder="请输入邮箱" id="email" onfocus="checkPwd()"></td>
                        </tr>
                    </table>
                    <div class="btn-div register-btn">
                        <button id="register-btn" onclick="submitForm()">注册</button>
                        <p class="sign-up-msg">点击 “注册” 即表示您同意并愿意遵守论坛<br>
                            用户协议 和 隐私政策 。
                        </p>
                    </div>
                    <!--登录的选项-->
                    <form action="/login" method="post">
                        <table class="self-table login" style="display: none">
                            <!--                    <input type="hidden" name="authenticity_token" th:value="#{authenticity_token}">-->
                            <tr>
                                <td><span class="glyphicon glyphicon-user"></span></td>
                                <td><input type="email"  placeholder="请输入邮箱" id="login_email" name="email"></td>
                            </tr>
                            <tr>
                                <td><span class="glyphicon glyphicon-lock"></span></td>
                                <td><input type="password" placeholder="请确认密码" id="login_password" name="password"></td>
                            </tr>
                        </table>
                        <div class="btn-div btn-div-login" style="display: none">
                            <input type="submit" value="登录" id="btn-login">
                        </div>
                    </form>
                    <div class="more-sign">
                        <h6>社交账号直接登录</h6>
                        <ul>
                            <li>
                                <a href="#"><img src="/static/images/QQ.jpg" ></a>
                            </li>
                            <li>
                                <a href="https://github.com/login/oauth/authorize?client_id=94d38df2b20a7acb563f&redirect_uri=http://localhost:8080/callback&scope=user&state=1"><img src="/static/images/Github.jpeg"></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

</nav>
</body>
</html>